!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/forms"),require("@angular/common"),require("rxjs")):"function"==typeof define&&define.amd?define("ng-starrating",["exports","@angular/core","@angular/forms","@angular/common","rxjs"],t):t((e=e||self)["ng-starrating"]={},e.ng.core,e.ng.forms,e.ng.common,e.rxjs)}(this,(function(e,t,n,r,a){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function o(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i}function i(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function s(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i}var l=function(){function e(){}return e.prototype.ngOnInit=function(){},e=o([t.Component({selector:"lib-rating",template:"\n    <p>\n      rating works!\n    </p>\n  "}),i("design:paramtypes",[])],e)}(),c=function(){function e(){var e=this;this.stars=[],this._readOnly=!1,this._totalStars=5,this.rate=new t.EventEmitter,this.onStarsCountChange||(this.onStarsCountChange=new a.Subject,this.onStarsCountChange.subscribe((function(){e.setStars(),e.generateRating(!0),e.applySizeAllStars(),e.applyColorStyleAllStars(!1),e.addEvents()}))),this.onValueChange||(this.onValueChange=new a.Subject,this.onValueChange.subscribe((function(){e.generateRating(),e.applySizeAllStars()}))),this.onCheckedColorChange||(this.onCheckedColorChange=new a.Subject,this.onCheckedColorChange.subscribe((function(){e.applyColorStyleAllStars(!0)}))),this.onUnCheckedColorChange||(this.onUnCheckedColorChange=new a.Subject,this.onUnCheckedColorChange.subscribe((function(){e.applyColorStyleAllStars(!1)}))),this.onSizeChange||(this.onSizeChange=new a.Subject,this.onSizeChange.subscribe((function(){e.applySizeAllStars()}))),this.onReadOnlyChange||(this.onReadOnlyChange=new a.Subject,this.onReadOnlyChange.subscribe((function(){e.readonly?e.makeReadOnly():e.makeEditable()})))}var n;return n=e,Object.defineProperty(e.prototype,"checkedcolor",{get:function(){return this._checkedColor},set:function(e){this._checkedColor=e,this._checkedColor&&this.onCheckedColorChange.next(this._checkedColor)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"uncheckedcolor",{get:function(){return this._unCheckedColor},set:function(e){this._unCheckedColor=e,this._unCheckedColor&&this.onUnCheckedColorChange.next(this._unCheckedColor)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(e){e=e&&null!=e?e:0,this._value=e,this._value>=0&&this.onValueChange.next(this._value)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._size.concat(this._size.includes("px")?"":"px")},set:function(e){e=e&&null!=e&&"0px"!=e?e:"24px",this._size=e,this.onSizeChange.next(this._size)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readonly",{get:function(){return"true"===String(this._readOnly)},set:function(e){this._readOnly=e,this.onReadOnlyChange.next(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalstars",{get:function(){return this._totalStars},set:function(e){this._totalStars=e<=0?5:e,this.onStarsCountChange.next(Number(e))},enumerable:!0,configurable:!0}),e.prototype.makeEditable=function(){this.mainElement&&(this.mainElement.nativeElement.style.cursor="pointer",this.mainElement.nativeElement.title=this.value,this.stars.forEach((function(e){e.style.cursor="pointer",e.title=e.dataset.index})))},e.prototype.makeReadOnly=function(){this.mainElement&&(this.mainElement.nativeElement.style.cursor="default",this.mainElement.nativeElement.title=this.value,this.stars.forEach((function(e){e.style.cursor="default",e.title=""})))},e.prototype.addEvents=function(){var e=this;this.mainElement&&(this.mainElement.nativeElement.addEventListener("mouseleave",this.offStar.bind(this)),this.mainElement.nativeElement.style.cursor="pointer",this.mainElement.nativeElement.title=this.value,this.stars.forEach((function(t){t.addEventListener("click",e.onRate.bind(e)),t.addEventListener("mouseenter",e.onStar.bind(e)),t.style.cursor="pointer",t.title=t.dataset.index})))},e.prototype.ngAfterViewInit=function(){},e.prototype.onRate=function(e){if(!this.readonly){var t=e.srcElement,n=this.value;this.value=parseInt(t.dataset.index),0==this.value&&(this.value=1);var r={oldValue:n,newValue:this.value,starRating:this};this.rate.emit(r)}},e.prototype.onStar=function(e){if(!this.readonly){for(var t=e.srcElement,n=parseInt(t.dataset.index),r=0;r<n;r++)this.stars[r].className="",this.addDefaultClass(this.stars[r]),this.addCheckedStarClass(this.stars[r]);for(r=n;r<this.stars.length;r++)this.stars[r].className="",this.addDefaultClass(this.stars[r])}},e.prototype.offStar=function(e){this.generateRating()},e.prototype.addDefaultClass=function(e){e.classList.add(n.CLS_DEFAULT_STAR)},e.prototype.addCheckedStarClass=function(e){e.classList.add(n.CLS_CHECKED_STAR)},e.prototype.addHalfStarClass=function(e){e.classList.add(n.CLS_HALF_STAR)},e.prototype.setStars=function(){var e=this;if(this.mainElement){var t=this.mainElement.nativeElement,n=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(s(arguments[t]));return e}(Array(Number(this.totalstars)).keys());this.stars.length=0,t.innerHTML="",n.forEach((function(n){var r=document.createElement("span");r.dataset.index=(n+1).toString(),r.title=r.dataset.index,t.appendChild(r),e.stars.push(r)}))}},e.prototype.applySizeAllStars=function(){var e=this;this._size&&(0==this.stars.length&&this.setStars(),this.stars.forEach((function(t){var r=e.size.match(/\d+/)[0],a=10*parseInt(r)/24,o=0-20*parseInt(r)/24;t.style.setProperty(n.VAR_SIZE,e.size),t.classList.contains(n.CLS_HALF_STAR)&&(t.style.setProperty(n.VAR_HALF_WIDTH,a+"px"),t.style.setProperty(n.VAR_HALF_MARGIN,o+"px"))})))},e.prototype.applyColorStyleAllStars=function(e){var t=this;0==this.stars.length&&this.setStars(),this.stars.forEach((function(n){e?t.applyCheckedColorStyle(n):t.applyUnCheckedColorStyle(n)}))},e.prototype.applyColorStyle=function(e){this.applyCheckedColorStyle(e),this.applyUnCheckedColorStyle(e)},e.prototype.applyCheckedColorStyle=function(e){e.style.setProperty(n.VAR_CHECKED_COLOR,this.checkedcolor)},e.prototype.applyUnCheckedColorStyle=function(e){e.style.setProperty(n.VAR_UNCHECKED_COLOR,this.uncheckedcolor)},e.prototype.generateRating=function(e){var t=this;if(void 0===e&&(e=!1),(!this.readonly||e)&&this.mainElement&&(0==this.stars.length&&this.setStars(),this.value>=0)){this.mainElement.nativeElement.title=this.value;var n=!!(Number.parseFloat(this.value.toString())%1).toString().substring(3,2),r=1;this.stars.forEach((function(e){e.className="",t.applyColorStyle(e),t.addDefaultClass(e),t.value>=r?t.addCheckedStarClass(e):n&&(t.addHalfStarClass(e),n=!1),r++}))}},e.VAR_CHECKED_COLOR="--checkedColor",e.VAR_UNCHECKED_COLOR="--unCheckedColor",e.VAR_SIZE="--size",e.VAR_HALF_WIDTH="--halfWidth",e.VAR_HALF_MARGIN="--halfMargin",e.CLS_CHECKED_STAR="on",e.CLS_DEFAULT_STAR="star",e.CLS_HALF_STAR="half",e.INP_CHECKED_COLOR="checkedcolor",e.INP_UNCHECKED_COLOR="uncheckedcolor",e.INP_VALUE="value",e.INP_SIZE="size",e.INP_READONLY="readonly",e.INP_TOTALSTARS="totalstars",o([t.ViewChild("starMain",{static:!0}),i("design:type",t.ElementRef)],e.prototype,"mainElement",void 0),o([t.Output(),i("design:type",t.EventEmitter)],e.prototype,"rate",void 0),o([t.Input(n.INP_CHECKED_COLOR),i("design:type",String),i("design:paramtypes",[String])],e.prototype,"checkedcolor",null),o([t.Input(n.INP_UNCHECKED_COLOR),i("design:type",String),i("design:paramtypes",[String])],e.prototype,"uncheckedcolor",null),o([t.Input(n.INP_VALUE),i("design:type",Number),i("design:paramtypes",[Number])],e.prototype,"value",null),o([t.Input(n.INP_SIZE),i("design:type",String),i("design:paramtypes",[String])],e.prototype,"size",null),o([t.Input(n.INP_READONLY),i("design:type",Boolean),i("design:paramtypes",[Boolean])],e.prototype,"readonly",null),o([t.Input(n.INP_TOTALSTARS),i("design:type",Number),i("design:paramtypes",[Number])],e.prototype,"totalstars",null),e=n=o([t.Component({selector:"star-rating",template:'<div #starMain>\r\n</div>\r\n\r\n\x3c!-- <ng-container *ngFor="let star of stars; let i = index;">\r\n    <span \r\n        (click)="!isReadOnly && onRate(i)" \r\n        (mouseleave)="!isReadOnly && generateRating()"\r\n        (mouseenter)="!isReadOnly && onStar(i)" \r\n        [ngStyle]="{\r\n            \'font-size\': getSize(),\r\n            \'width\': getSize(),\r\n            pointer: isReadOnly ? \'default\' : \'pointer\'\r\n        }" \r\n        [ngClass]="{\r\n            on: star.checked,\r\n            half: star.isHalf,\r\n            readOnly: isReadOnly,\r\n            editable: !isReadOnly\r\n        }"></span>\r\n</ng-container> --\x3e',encapsulation:t.ViewEncapsulation.ShadowDom,styles:[":root{--checkedColor:gold;--unCheckedColor:gray;--size:24px;--halfWidth:10px;--halfMargin:-20px}.star{cursor:pointer;color:var(--unCheckedColor);font-size:var(--size);width:var(--size);display:inline-block}.star:last-child{margin-right:0}.star:before{content:'\\2605'}.star.on{color:var(--checkedColor)}.star.half:after{content:'\\2605';color:var(--checkedColor);position:absolute;margin-left:var(--halfMargin);width:var(--halfWidth);overflow:hidden}"]}),i("design:paramtypes",[])],e)}(),h=function(){function e(){}return e.prototype.ngDoBootstrap=function(){},e=o([t.NgModule({imports:[n.FormsModule,r.CommonModule],declarations:[l,c],exports:[c],entryComponents:[c]})],e)}();e.RatingModule=h,e.StarRatingComponent=c,e.ɵa=l,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ng-starrating.umd.min.js.map